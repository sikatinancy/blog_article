{% extends 'base.html' %}
{% load static %}
{% block content %}
<!-- Carousel Section -->
<div class="carousel w-full mb-12 rounded-2xl overflow-hidden shadow-xl">
    <div class="flex">
        {% for article in articles %}
            {% if article.image and article.published %}
                <div class="carousel-item w-full">
                    <img src="{{ article.image.url }}" alt="{{ article.title }}" class="w-full h-64 object-cover" />
                </div>
            {% endif %}
        {% endfor %}
    </div>
</div>

<!-- Hero Section -->
<section class="hero-section relative flex flex-col items-center justify-center min-h-[60vh] mb-12">
    <div class="absolute inset-0 bg-black/30"></div>
    <div class="relative z-10 text-center py-16 px-4">
        <h1 class="text-5xl md:text-6xl font-extrabold mb-4 drop-shadow-lg">Bienvenue sur <span class="text-accent">BlogApp</span></h1>
        <p class="text-xl md:text-2xl font-medium mb-8 max-w-2xl mx-auto">Partagez vos idées, découvrez de nouveaux articles, et connectez-vous avec la communauté.</p>
        <div class="flex flex-wrap justify-center gap-4">
            <a href="#articles" class="btn-primary inline-block px-8 py-3 font-bold rounded-full shadow transition">Découvrir les articles</a>
            <a href="#about" class="btn-outline inline-block px-8 py-3 font-bold rounded-full transition">À propos</a>
        </div>
    </div>
</section>

<!-- About Section -->
<section id="about" class="about-section max-w-4xl mx-auto mb-16">
    <div class="text-center">
        <h2 class="text-3xl font-bold text-primary mb-2">À propos de nous</h2>
        <p class="text-gray-600 mb-6">Bienvenue sur BlogApp, une plateforme moderne pour partager vos idées et découvertes.</p>
        <div class="flex flex-wrap justify-center gap-8 text-lg">
            <div class="stat-card">
                <span class="stat-value block">{{ user_count }}</span>
                <span class="stat-label">Utilisateurs</span>
            </div>
            <div class="stat-card">
                <span class="stat-value block">{{ article_count }}</span>
                <span class="stat-label">Articles publiés</span>
            </div>
            <div class="stat-card">
                <span class="stat-value block">{{ comment_count }}</span>
                <span class="stat-label">Commentaires</span>
            </div>
            <div class="stat-card">
                <span class="stat-value block">{{ message_count }}</span>
                <span class="stat-label">Messages</span>
            </div>
        </div>
    </div>
</section>

<!-- Articles Section -->
<section id="articles" class="articles-section max-w-6xl mx-auto mb-16">
    <h2 class="text-3xl font-bold text-primary mb-8 text-center">Articles</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for article in articles %}
            {% if article.published %}
                <div class="article-card">
                    {% if article.image %}
                        <img src="{{ article.image.url }}" alt="{{ article.title }}" class="w-full h-48 object-cover mb-4">
                    {% endif %}
                    <h3 class="article-title mb-2">{{ article.title }}</h3>
                    <p class="article-desc flex-1 mb-2">{{ article.description|truncatewords:30 }}</p>
                    <div class="flex items-center justify-between mt-2">
                        <span class="text-sm text-gray-500">Par {{ article.author.username }}</span>
                        <a href="#" class="article-link">Lire plus</a>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
</section>

<!-- Comments Section -->
<section id="comments" class="comments-section max-w-4xl mx-auto mb-16">
    <h2 class="text-3xl font-bold text-primary mb-8 text-center">Commentaires</h2>
    <div class="space-y-6">
        {% for comment in comments %}
            {% if comment.published %}
                <div class="comment-card">
                    {% if comment.author.profile.profile_image %}
                        <img src="{{ comment.author.profile.profile_image.url }}" alt="{{ comment.author.username }}">
                    {% endif %}
                    <div>
                        <p class="comment-content mb-1">{{ comment.content }}</p>
                        <p class="comment-meta">Par <span class="font-semibold">{{ comment.author.username }}</span> sur <span class="font-semibold">{{ comment.article.title }}</span></p>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
</section>
{% endblock %}